---
import Layout from "@/layouts/Layout.astro";
import CardItem from "@/components/CardItem.astro";
import ChipList from "@/components/ChipList.astro";
import { publicBlogs as blogs } from "@/utils";
import projects from "@/data/projects";
import experiences from "@/data/experiences";
import { skills, stacks } from "@/data/stack";

const featuredProjects = projects.filter((project) => project.featured);
const otherProjects = projects.filter((project) => !project.featured);
const latestPosts = blogs.slice(0, 3);
---

<Layout title="Yumi Izumi">
  <section class="hero section">
    <h1># hi, i&apos;m yumi</h1>
    <p class="lead">
      forward-deployed engineer at a kyoto ai startup.<br />
      bilingual in english and japanese.
    </p>
    <div class="cta-row">
      <a class="button button-primary" href="https://yumi.to/cal">book a chat</a>
      <a class="button button-secondary" href="#experience">view experience</a>
    </div>
    <p class="currently">
      currently at <a class="inline-link" href="https://rutilea.com">rutilea, inc.</a> — leading ai-driven system migration for japanese government agencies, and managing llm infrastructure on 128 gpus.
    </p>
  </section>
  <section class="section" id="about">
    <h2>## about</h2>
    <p class="lead">
      i graduated early from penn state with a b.s. in cybersecurity, co-founded
      a startup, and now embed with enterprise clients to ship ai systems. i've
      researched llm safety, sold gpu contracts at nvidia gtc, and lead
      system migrations for japanese government agencies.
    </p>
  </section>
  <section class="section" id="experience">
    <h2>## experience</h2>
    <ul class="card-list">
      {
        experiences.map((exp) => (
          <CardItem
            title={exp.company}
            badge={exp.role}
            meta={exp.period}
            onclick={`document.getElementById('${exp.id}').showModal()`}
          />
        ))
      }
    </ul>
  </section>
  {
    experiences.map((exp) => (
      <dialog id={exp.id} class="experience-dialog">
        <div class="dialog-inner">
          <h2>{exp.company} — {exp.role}</h2>
          <span class="card-meta">{exp.location} · {exp.period}</span>
          <ul class="experience-details">
            {exp.details.map((detail) => (
              <li set:html={detail} />
            ))}
          </ul>
          <form method="dialog">
            <button class="button button-secondary dialog-close" autofocus>close</button>
          </form>
        </div>
      </dialog>
    ))
  }
  <section class="section" id="projects">
    <h2>## projects</h2>
    <ul class="card-list">
      {
        featuredProjects.map((project) => (
          <CardItem
            title={project.title}
            badge={project.kind}
            meta={project.period}
            href={project.url}
            stars={project.stars}
          />
        ))
      }
    </ul>
    <ul class="card-list">
      {
        otherProjects.map((project) => (
          <CardItem
            title={project.title}
            badge={project.kind}
            meta={project.period}
            href={project.url}
            stars={project.stars}
            subtle
          />
        ))
      }
    </ul>
  </section>
  <section class="section" id="writing">
    <h2>## writing</h2>
    <p class="lead">i write about programming, focus, and digital life.</p>
    <ul class="writing-list">
      {
        latestPosts.map((post) => (
          <li>
            <a href={`/blog/${post.slug}`}>
              <span class="card-meta">
                {new Date(post.data.pubDate).toISOString().split("T")[0]}
              </span>
              <span class="card-title">{post.data.title}</span>
            </a>
          </li>
        ))
      }
    </ul>
    <a class="inline-link" href="/blog">see all posts →</a>
  </section>
  <section class="section" id="skills">
    <h2>## skills</h2>
    <p class="lead">confident with:</p>
    <ChipList items={skills} />
  </section>
  <section class="section" id="stack">
    <h2>## stack</h2>
    <p class="lead">daily tools i rely on:</p>
    <ChipList items={stacks} />
  </section>
  <section class="section" id="contact">
    <h2>## contact</h2>
    <p class="lead">
      open to opportunities, collaboration, or a quick hello.
    </p>
    <div class="contact-links">
      <a class="inline-link" href="https://yumi.to/cal" aria-label="Yumi's Cal.com page">book via cal.com</a>
      <a class="inline-link" href="https://yumi.to/card" aria-label="virtual card">view contact card</a>
      <span>mail (at) yumi.to</span>
    </div>
  </section>
</Layout>
