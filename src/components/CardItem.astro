---
interface Props {
  title: string;
  badge?: string;
  meta: string;
  href?: string;
  onclick?: string;
  subtle?: boolean;
  stars?: number;
}

const { title, badge, meta, href, onclick, subtle, stars } = Astro.props;
const starsLabel = stars ? (stars >= 1000 ? `★ ${(stars / 1000).toFixed(1)}k` : `★ ${stars}`) : null;
---

<li class:list={["card", { "card-subtle": subtle }]}>
  {href ? (
    <a href={href}>
      <span class="card-title">{title}</span>
      <span class="card-badges">
        {badge && <span class="badge">{badge}</span>}
        {starsLabel && <span class="stars-hint">{starsLabel}</span>}
      </span>
      <span class="card-meta">{meta}</span>
    </a>
  ) : (
    <button class="card-button" onclick={onclick}>
      <span class="card-title">{title}</span>
      <span class="card-badges">
        {badge && <span class="badge">{badge}</span>}
        {starsLabel && <span class="stars-hint">{starsLabel}</span>}
      </span>
      <span class="card-meta">{meta}</span>
    </button>
  )}
</li>

<style>
  .card-badges {
    display: flex;
    gap: 0.4rem;
    align-items: center;
  }
  .stars-hint {
    font-size: 0.75em;
    color: var(--muted);
    opacity: 0.6;
  }
</style>
